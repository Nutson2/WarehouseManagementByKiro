# План реализации системы управления складом

- [x] 1. Настройка проекта и базовой инфраструктуры





  - Создать решение ASP.NET Core с многослойной архитектурой (Domain, Application, Infrastructure, API)
  - Настроить Entity Framework Core с поддержкой SQL Server и PostgreSQL
  - Настроить автоматическое создание базы данных при первом запуске
  - Добавить базовые пакеты (AutoMapper, FluentValidation, MediatR)
  - _Требования: 6.1, 6.2, 6.4, 6.5_

- [x] 2. Реализация доменного слоя





  - Создать базовые доменные сущности (BaseEntity, Resource, UnitOfMeasure, Client)
  - Реализовать перечисления EntityStatus и DocumentStatus
  - Создать доменные сущности для документов (ReceiptDocument, ShipmentDocument, Balance)
  - Добавить доменные исключения для бизнес-правил
  - _Требования: 1.1, 1.2, 1.3, 2.1, 3.1_

- [x] 3. Настройка Entity Framework и миграций





  - Создать DbContext с конфигурацией всех сущностей
  - Настроить Fluent API для связей между сущностями
  - Добавить ограничения уникальности на уровне базы данных
  - Создать и применить начальные миграции
  - _Требования: 6.1, 1.1, 1.2, 1.3, 2.1, 3.1_

- [x] 4. Реализация репозиториев и Unit of Work




  - Создать базовый интерфейс IRepository<T> и его реализацию
  - Реализовать специализированные репозитории (IResourceRepository, IBalanceRepository и др.)
  - Создать Unit of Work паттерн для управления транзакциями
  - Добавить методы для проверки уникальности наименований
  - _Требования: 1.1, 1.2, 1.3, 2.1, 3.1, 4.2_

- [x] 5. Создание доменного сервиса для управления балансом





  - Реализовать IBalanceService для операций с балансом склада
  - Добавить методы для обновления баланса при операциях с документами
  - Реализовать валидацию достаточности ресурсов на складе
  - Добавить логику суммирования баланса по ресурсу и единице измерения
  - _Требования: 4.1, 4.2, 4.3, 4.4, 2.6, 3.5_

- [ ] 6. Реализация Application Services для справочников
  - Создать команды и запросы для управления ресурсами (Create, Update, Delete, Archive)
  - Реализовать Application Services для единиц измерения
  - Добавить Application Services для управления клиентами
  - Реализовать валидацию бизнес-правил (уникальность, проверка использования)
  - _Требования: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_

- [ ] 7. Создание Application Services для документов поступления
  - Реализовать команды для создания, редактирования и удаления документов поступления
  - Добавить логику автоматического обновления баланса при операциях с документами
  - Реализовать валидацию уникальности номеров документов
  - Добавить поддержку пустых документов поступления
  - _Требования: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6_

- [ ] 8. Создание Application Services для документов отгрузки
  - Реализовать команды для создания, редактирования и удаления документов отгрузки
  - Добавить команды для подписания и отзыва документов отгрузки
  - Реализовать логику изменения баланса только при подписании/отзыве
  - Добавить валидацию непустых документов отгрузки
  - _Требования: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6_

- [ ] 9. Реализация API контроллеров для справочников
  - Создать ResourcesController с CRUD операциями и архивированием
  - Реализовать UnitsController для управления единицами измерения
  - Добавить ClientsController для управления клиентами
  - Настроить валидацию входных данных и обработку ошибок
  - _Требования: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_

- [ ] 10. Создание API контроллера для баланса склада
  - Реализовать BalanceController для получения баланса склада
  - Добавить фильтрацию по ресурсам и единицам измерения
  - Реализовать серверную фильтрацию данных
  - Настроить возврат актуальной информации по балансу
  - _Требования: 4.3, 5.1, 5.4_

- [ ] 11. Реализация API контроллеров для документов
  - Создать ReceiptsController для управления документами поступления
  - Реализовать ShipmentsController для документов отгрузки с операциями подписания
  - Добавить фильтрацию по датам, номерам документов, ресурсам и единицам измерения
  - Реализовать отображение содержимого документов (входящие ресурсы)
  - _Требования: 2.1-2.6, 3.1-3.6, 5.2, 5.3, 5.4, 5.5, 5.6_

- [ ] 12. Настройка обработки ошибок и валидации
  - Создать глобальный обработчик исключений
  - Реализовать стандартизированные ответы об ошибках
  - Добавить валидацию на уровне API и Application
  - Настроить логирование ошибок и операций
  - _Требования: 1.1, 1.4, 2.6, 3.5, 4.4_

- [ ] 13. Создание базового клиентского приложения
  - Настроить клиентское приложение (React/Angular/Vue или Razor Pages для junior)
  - Создать базовую структуру страниц и навигацию
  - Реализовать HTTP клиент для взаимодействия с API
  - Добавить базовые компоненты для отображения данных
  - _Требования: 6.3_

- [ ] 14. Реализация страниц управления справочниками
  - Создать страницы для управления ресурсами с CRUD операциями
  - Реализовать страницы для единиц измерения и клиентов
  - Добавить функциональность архивирования сущностей
  - Реализовать валидацию на клиентской стороне
  - _Требования: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_

- [ ] 15. Создание страницы баланса склада с фильтрацией
  - Реализовать страницу отображения баланса склада
  - Добавить фильтры по ресурсам и единицам измерения с множественным выбором
  - Реализовать серверную фильтрацию и пагинацию
  - Добавить автоматическое обновление данных
  - _Требования: 4.3, 5.1, 5.3, 5.4_

- [ ] 16. Реализация страниц документов поступления
  - Создать страницу списка документов поступления с фильтрацией
  - Реализовать страницы создания и редактирования документов
  - Добавить отображение содержимого документов (ресурсы)
  - Реализовать фильтры по датам, номерам, ресурсам и единицам измерения
  - _Требования: 2.1-2.6, 5.2, 5.3, 5.4, 5.5, 5.6_

- [ ] 17. Создание страниц документов отгрузки
  - Реализовать страницу списка документов отгрузки с фильтрацией
  - Создать страницы создания и редактирования документов отгрузки
  - Добавить функциональность подписания и отзыва документов
  - Реализовать отображение статуса документов и их содержимого
  - _Требования: 3.1-3.6, 5.2, 5.3, 5.4, 5.5, 5.6_

- [ ] 18. Написание unit тестов для доменного слоя
  - Создать тесты для доменных сущностей и их методов
  - Написать тесты для доменных сервисов (BalanceService)
  - Добавить тесты для валидации бизнес-правил
  - Реализовать тесты для доменных исключений
  - _Требования: 1.1-1.6, 2.1-2.6, 3.1-3.6, 4.1-4.4_

- [ ] 19. Создание integration тестов для API
  - Написать тесты для всех API контроллеров
  - Создать тесты для сценариев работы с балансом
  - Добавить тесты для фильтрации и пагинации
  - Реализовать тесты для обработки ошибок
  - _Требования: 1.1-1.6, 2.1-2.6, 3.1-3.6, 4.1-4.4, 5.1-5.6_

- [ ] 20. Финальная интеграция и тестирование системы
  - Провести end-to-end тестирование всех пользовательских сценариев
  - Проверить корректность работы с балансом в различных сценариях
  - Протестировать производительность при больших объемах данных
  - Добавить документацию по развертыванию и использованию системы
  - _Требования: 6.1, 7.1, 7.2, 7.3_