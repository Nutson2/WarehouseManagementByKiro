# Требования к системе управления складом

## Введение

Система управления складом - это веб-приложение для автоматизации работы склада, включающее управление ресурсами, единицами измерения, клиентами, документами поступления и отгрузки, а также контроль баланса товаров на складе. Система должна быть построена на ASP.NET Core с отдельным клиентским приложением и базой данных MS SQL Server или PostgreSQL.

## Требования

### Требование 1: Управление справочниками

**Пользовательская история:** Как администратор склада, я хочу управлять справочниками ресурсов, единиц измерения и клиентов, чтобы поддерживать актуальную информацию о товарах и партнерах.

#### Критерии приемки

1. WHEN пользователь создает новый ресурс THEN система SHALL проверить уникальность наименования и создать ресурс с состоянием "активный"
2. WHEN пользователь создает новую единицу измерения THEN система SHALL проверить уникальность наименования и создать единицу измерения с состоянием "активный"
3. WHEN пользователь создает нового клиента THEN система SHALL проверить уникальность наименования и создать клиента с состоянием "активный"
4. WHEN пользователь пытается удалить используемый ресурс/единицу измерения/клиента THEN система SHALL предотвратить удаление и предложить перевод в архив
5. WHEN пользователь переводит сущность в архив THEN система SHALL изменить состояние на "архивный" и скрыть из списков выбора для новых документов
6. IF сущность уже используется в документе AND находится в архиве THEN система SHALL продолжать отображать ее в этом документе

### Требование 2: Управление документами поступления

**Пользовательская история:** Как сотрудник склада, я хочу создавать и управлять документами поступления товаров, чтобы отслеживать поступление товаров на склад.

#### Критерии приемки

1. WHEN пользователь создает документ поступления THEN система SHALL проверить уникальность номера документа
2. WHEN пользователь сохраняет документ поступления THEN система SHALL увеличить баланс склада на количество поступивших ресурсов
3. WHEN пользователь удаляет документ поступления THEN система SHALL уменьшить баланс склада на соответствующее количество
4. WHEN пользователь редактирует ресурсы в документе поступления THEN система SHALL пересчитать баланс склада согласно изменениям
5. WHEN создается документ поступления без ресурсов THEN система SHALL разрешить сохранение пустого документа
6. IF на складе недостаточно ресурсов для операции THEN система SHALL предотвратить сохранение/удаление документа

### Требование 3: Управление документами отгрузки

**Пользовательская история:** Как сотрудник склада, я хочу создавать и управлять документами отгрузки товаров клиентам, чтобы контролировать отпуск товаров со склада.

#### Критерии приемки

1. WHEN пользователь создает документ отгрузки THEN система SHALL проверить уникальность номера документа и требовать указание клиента
2. WHEN пользователь создает/редактирует/удаляет документ отгрузки THEN система SHALL НЕ изменять баланс склада до подписания
3. WHEN пользователь подписывает документ отгрузки THEN система SHALL уменьшить баланс склада на количество отгружаемых ресурсов
4. WHEN пользователь отзывает подписанный документ отгрузки THEN система SHALL увеличить баланс склада на соответствующее количество
5. WHEN пользователь пытается подписать документ отгрузки THEN система SHALL проверить достаточность ресурсов на складе
6. WHEN создается документ отгрузки без ресурсов THEN система SHALL предотвратить сохранение пустого документа

### Требование 4: Управление балансом склада

**Пользовательская история:** Как администратор склада, я хочу видеть актуальный баланс товаров на складе, чтобы контролировать остатки и планировать закупки.

#### Критерии приемки

1. WHEN в системе есть ресурсы с одинаковым ресурсом и единицей измерения THEN система SHALL суммировать их количество в общем балансе
2. WHEN происходит любая операция с документами THEN система SHALL автоматически пересчитывать баланс склада
3. WHEN пользователь просматривает баланс склада THEN система SHALL отображать актуальную информацию по всем ресурсам
4. WHEN баланс ресурса становится отрицательным THEN система SHALL предотвратить операцию и показать ошибку

### Требование 5: Фильтрация и поиск

**Пользовательская история:** Как пользователь системы, я хочу фильтровать данные на страницах склада, поступлений и отгрузок, чтобы быстро находить нужную информацию.

#### Критерии приемки

1. WHEN пользователь находится на странице "Склад" THEN система SHALL предоставить фильтры по ресурсам и единицам измерения
2. WHEN пользователь находится на страницах "Поступления" или "Отгрузки" THEN система SHALL предоставить фильтры по датам, номерам документов, ресурсам и единицам измерения
3. WHEN пользователь использует фильтры по номерам документов, ресурсам и единицам измерения THEN система SHALL поддерживать множественный выбор
4. WHEN пользователь применяет фильтры THEN система SHALL выполнять фильтрацию на сервере
5. WHEN пользователь просматривает документы поступления/отгрузки THEN система SHALL отображать содержимое документов (входящие ресурсы)
6. WHEN пользователь использует фильтры по номерам документов, ресурсам и единицам измерения THEN система SHALL НЕ зависеть от выбранного периода дат

### Требование 6: Техническая архитектура

**Пользовательская история:** Как разработчик, я хочу иметь надежную техническую архитектуру, чтобы система была масштабируемой и поддерживаемой.

#### Критерии приемки

1. WHEN система запускается впервые THEN система SHALL автоматически создать базу данных если она не существует
2. WHEN система развертывается THEN серверная часть SHALL быть написана на C# с использованием ASP.NET Core
3. WHEN система развертывается THEN клиентская часть SHALL быть отдельным приложением на React/Angular/Vue/Blazor WASM или Razor Pages/MVC для junior уровня
4. WHEN система работает с данными THEN система SHALL использовать MS SQL Server или PostgreSQL в качестве базы данных
5. WHEN система обрабатывает запросы THEN система SHALL использовать любую подходящую ORM для работы с базой данных

### Требование 7: Уровни функциональности

**Пользовательская история:** Как заказчик, я хочу иметь возможность выбрать уровень реализации функциональности в зависимости от потребностей.

#### Критерии приемки

1. WHEN реализуется junior уровень THEN система SHALL включать справочники "Ресурсы", "Единицы измерения" и раздел "Поступления"
2. WHEN реализуется middle уровень THEN система SHALL включать полный функционал со всеми сущностями и бизнес-правилами
3. WHEN выбирается уровень функциональности THEN система SHALL соответствовать всем техническим требованиям независимо от уровня